{"version":3,"file":"index.js","sources":["../../src/common/ws-url.js","../../src/common/msg-struct.js","../../src/util/convert.js","../../src/util/packet.js","../../src/base/Socket.js","../../src/base/Room.js"],"sourcesContent":["/**\n * 获取对应的ws-url地址\n */\nlet wsUrl = 'ws://broadcastlv.chat.bilibili.com:2244/sub'\n\nif (window !== undefined) {\n  const protocol = location.origin.match(/^(.+):\\/\\//)[1]\n  if (protocol === 'https') {\n    wsUrl = 'wss://broadcastlv.chat.bilibili.com:2245/sub'\n  }\n}\n\nexport default wsUrl\n","/**\n * 各个帧结构所需要的字段，待拓展\n */\n\nconst messageStruct = [{\n  name: 'Header Length', // 帧头\n  key: 'headerLen',\n  bytes: 2, // 字节长度\n  offset: 4, // 偏移量\n  value: 16\n}, {\n  name: 'Protocol Version', // 协议版本\n  key: 'ver',\n  bytes: 2,\n  offset: 6,\n  value: 1\n}, {\n  name: 'Operation', // 指令\n  key: 'op',\n  bytes: 4,\n  offset: 8,\n  value: 1\n}, {\n  name: 'Sequence Id',\n  key: 'seq',\n  bytes: 4,\n  offset: 12,\n  value: 1\n}]\n\nexport default messageStruct\n","/**\n * 字符串转化为Byte字节\n * @param {String} str 要转化的字符串\n * @return {Array[byte]} 字节数组\n */\nfunction str2bytes (str) {\n  const bytes = []\n  let c\n  const len = str.length\n  for (let i = 0; i < len; i++) {\n    c = str.charCodeAt(i)\n    if (c >= 0x010000 && c <= 0x10FFFF) {\n      bytes.push(((c >> 18) & 0x07) | 0xF0)\n      bytes.push(((c >> 12) & 0x3F) | 0x80)\n      bytes.push(((c >> 6) & 0x3F) | 0x80)\n      bytes.push((c & 0x3F) | 0x80)\n    } else if (c >= 0x000800 && c <= 0x00FFFF) {\n      bytes.push(((c >> 12) & 0x0F) | 0xE0)\n      bytes.push(((c >> 6) & 0x3F) | 0x80)\n      bytes.push((c & 0x3F) | 0x80)\n    } else if (c >= 0x000080 && c <= 0x0007FF) {\n      bytes.push(((c >> 6) & 0x1F) | 0xC0)\n      bytes.push((c & 0x3F) | 0x80)\n    } else {\n      bytes.push(c & 0xFF)\n    }\n  }\n  return bytes\n}\n\n/**\n * 将字节数组转化为字符串\n * @param {Array[byte]} bytesArray 字节数组\n * @return {String} 字符串\n */\nfunction bytes2str (array) {\n  const bytes = array.slice(0)\n  const filterArray = [\n    [0x7f],\n    [0x1f, 0x3f],\n    [0x0f, 0x3f, 0x3f],\n    [0x07, 0x3f, 0x3f, 0x3f]\n  ]\n  let j\n  let str = ''\n  for (let i = 0; i < bytes.length; i = i + j) {\n    const item = bytes[i]\n    let number = ''\n    if (item >= 240) {\n      j = 4\n    } else if (item >= 224) {\n      j = 3\n    } else if (item >= 192) {\n      j = 2\n    } else if (item < 128) {\n      j = 1\n    }\n    const filter = filterArray[j - 1]\n    for (let k = 0; k < j; k++) {\n      let r = (bytes[i + k] & filter[k]).toString(2)\n      const l = r.length\n      if (l > 6) {\n        number = r\n        break\n      }\n      for (let n = 0; n < 6 - l; n++) {\n        r = '0' + r\n      }\n      number = number + r\n    }\n    str = str + String.fromCharCode(parseInt(number, 2))\n  }\n  return str\n}\n\nexport {\n  str2bytes,\n  bytes2str\n}\n","import { str2bytes } from './convert'\n\n/**\n * 生成对应的消息包\n * @param {Number} action 2是心跳包/7是加入房间\n * @param {String} payload\n */\nfunction generatePacket (action = 2, payload = '') {\n  const packet = str2bytes(payload)\n  const buff = new ArrayBuffer(packet.length + 16)\n  const dataBuf = new DataView(buff)\n  dataBuf.setUint32(0, packet.length + 16)\n  dataBuf.setUint16(4, 16)\n  dataBuf.setUint16(6, 1)\n  dataBuf.setUint32(8, action)\n  dataBuf.setUint32(12, 1)\n  for (let i = 0; i < packet.length; i++) {\n    dataBuf.setUint8(16 + i, packet[i])\n  }\n  return dataBuf\n}\n\nexport {\n  generatePacket\n}\n","import wsUrl from '../common/ws-url'\nimport msgStruct from '../common/msg-struct'\nimport { generatePacket } from '../util/packet'\nimport { bytes2str } from '../util/convert'\n\nexport default class Socket {\n  constructor (roomid) {\n    this.roomid = roomid\n    /* eslint-disable */\n    this._docker = new WebSocket(wsUrl)\n    this._methods = []\n  }\n\n  init () {\n    console.log(`新的socket正在初始化...`)\n    this._docker.binaryType = 'arraybuffer'\n    this._docker.onopen = event => {\n      const join = this._joinRoom(this.roomid)\n      this._docker.send(join.buffer)\n      this._sendBeat()\n    }\n\n    this._docker.onmessage = event => {\n      const dataView = new DataView(event.data)\n      const data = {}\n      data.packetLen = dataView.getUint32(0)\n      msgStruct.forEach(item => {\n        if (item.bytes === 4) {\n          data[item.key] = dataView.getUint32(item.offset)\n        } else if (item.bytes === 2) {\n          data[item.key] = dataView.getUint16(item.offset)\n        }\n      })\n      if (data.op && data.op === 5) {\n        data.body = []\n        let packetLen = data.packetLen\n        let headerLen\n        for (let offset = 0; offset < dataView.byteLength; offset += packetLen) {\n          packetLen = dataView.getUint32(offset)\n          headerLen = dataView.getUint16(offset + 4)\n\n          const recData = []\n          for (let i = headerLen; i < packetLen; i++) {\n            recData.push(dataView.getUint8(i))\n          }\n          try {\n            const body = JSON.parse(bytes2str(recData))\n            if (body.cmd === 'DANMU_MSG') {\n              console.log(body.info[2][1], ':', body.info[1])\n              this._call({\n                name: body.info[2][1],\n                text: body.info[1]\n              })\n            }\n            data.body.push(body)\n          } catch (e) {\n            // console.log('tcp 校验失败，重新发送')\n          }\n        }\n      }\n    }\n\n    this._docker.onclose = event => {\n      console.log(`旧的socket已经关闭...`)\n    }\n  }\n\n  addMethods (fns) {\n    this._methods = fns\n  }\n\n  close () {\n    // 清除定时脚本\n    if (this._timer) {\n      clearTimeout(this._timer)\n      this._timer = null\n    }\n    this._docker.close()\n  }\n\n  /**\n   * 执行函数\n   */\n  _call (...args) {\n    for (let i = 0, l = this._methods.length; i < l; i++) {\n      const fn = this._methods[i]\n      if (typeof fn !== 'function') continue\n      fn.apply(null, args)\n    }\n  }\n\n  /**\n   * 发送加入房价包\n   */\n  _joinRoom (rid = 282712, uid = 19176530) {\n    const packet = JSON.stringify({\n      uid,\n      roomid: rid\n    })\n    return generatePacket(7, packet)\n  }\n\n  /**\n   * 发送心跳包，表明连接激活\n   */\n  _sendBeat () {\n    this._timer = setInterval(() => {\n      this._docker.send(generatePacket())\n    }, 3000)\n  }\n}\n","import Socket from './Socket'\n\n/**\n * bilibili房间类\n */\nclass Room {\n  constructor (roomid) {\n    this.roomid = roomid\n    this.socket = new Socket(roomid)\n  }\n\n  _init () {\n    this.socket.init()\n  }\n\n  $start () {\n    console.log(`加入房间${this.roomid}`)\n    this._init()\n    return this\n  }\n\n  /**\n   * 销毁实例\n   */\n  $destroy () {\n    // 关闭socket\n    this.socket.close()\n    this.socket = null\n\n    console.log(`退出房间${this.roomid}`)\n    this.roomid = null\n  }\n\n  $subscribe (fn) {\n    const fns = Array.isArray(fn) ? fn : [fn]\n    this.socket.addMethods(fns)\n    return this\n  }\n\n}\n\nexport default Room\n"],"names":["let","const","wsUrl","this","msgStruct"],"mappings":"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"}